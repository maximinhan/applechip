sourceSets {
     generated
}
sourceSets.generated.java.srcDirs = ['src/main/generated']
/*
sourceSets {
	generated {
		java {
			srcDirs 'src/main/generated'
		}
	}
}
*/

configurations {
	querydslapt
}
dependencies {
	def queryDSL = '3.4.2'
	compile("com.mysema.querydsl:querydsl-core:$queryDSL")
	compile("com.mysema.querydsl:querydsl-jpa:$queryDSL")
	compile("com.mysema.querydsl:querydsl-sql:$queryDSL")
	compile("com.mysema.querydsl:querydsl-codegen:$queryDSL")
	compile("com.mysema.querydsl:querydsl-apt:$queryDSL")
	compile("com.mysema.codegen:codegen:0.6.2")
	compile("com.google.guava:guava-collections:r03")
	compile("com.google.guava:guava-base:r03")
	compile("javax.inject:javax.inject:1")
}

task generateQueryDSL(type: JavaCompile, group: 'build', description: 'Generates the QueryDSL query types') {
	source = sourceSets.main.java
	classpath = configurations.compile + configurations.provided
	options.compilerArgs = [
		"-proc:only",
		"-processor", "com.mysema.query.apt.jpa.JPAAnnotationProcessor"
	]
	destinationDir = sourceSets.generated.java.srcDirs.iterator().next()
}